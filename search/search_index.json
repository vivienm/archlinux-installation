{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Guide d'installation Arch Linux \u00b6 Ce document d\u00e9crit les diff\u00e9rentes \u00e9tapes n\u00e9cessaires \u00e0 l'installation d'Arch Linux sur un ordinateur personnel. Arch Linux est une distribution qui laisse une grande libert\u00e9 de choix \u00e0 ses utilisateurs. La proc\u00e9dure d'installation d\u00e9crite ici a les caract\u00e9ristiques suivantes : Le syst\u00e8me d\u00e9marre en UEFI et utilise systemd-boot comme chargeur de d\u00e9marrage. La partition principale est au format ext4 et se trouve dans un volume logique LVM, lui-m\u00eame chiffr\u00e9 avec dm-crypt. La disposition clavier est en AZERTY. Il n'y a pas de partition swap, l'hibernation est impossible. mkinitcpio utilise des crochets systemd. La configuration r\u00e9seau est g\u00e9r\u00e9e par systemd-networkd et systemd-resolved.","title":"Accueil"},{"location":"#guide-dinstallation-arch-linux","text":"Ce document d\u00e9crit les diff\u00e9rentes \u00e9tapes n\u00e9cessaires \u00e0 l'installation d'Arch Linux sur un ordinateur personnel. Arch Linux est une distribution qui laisse une grande libert\u00e9 de choix \u00e0 ses utilisateurs. La proc\u00e9dure d'installation d\u00e9crite ici a les caract\u00e9ristiques suivantes : Le syst\u00e8me d\u00e9marre en UEFI et utilise systemd-boot comme chargeur de d\u00e9marrage. La partition principale est au format ext4 et se trouve dans un volume logique LVM, lui-m\u00eame chiffr\u00e9 avec dm-crypt. La disposition clavier est en AZERTY. Il n'y a pas de partition swap, l'hibernation est impossible. mkinitcpio utilise des crochets systemd. La configuration r\u00e9seau est g\u00e9r\u00e9e par systemd-networkd et systemd-resolved.","title":"Guide d'installation Arch Linux"},{"location":"installation/configuration/","text":"Configuration \u00b6 Fstab \u00b6 G\u00e9n\u00e9rer le fichier fstab : $ genfstab -U /mnt >> /mnt/etc/fstab V\u00e9rifier le fichier g\u00e9n\u00e9r\u00e9 /mnt/etc/fstab et le corriger si n\u00e9cessaire. Il devrait typiquement se pr\u00e9senter comme suit : # Static information about the filesystems. # See fstab(5) for details. # <file system> <dir> <type> <options> <dump> <pass> # /dev/mapper/arch-root LABEL=ARCH_ROOT UUID=0c71a3c6-d4d1-48a5-9f41-93a31ff5c042 / ext4 rw,relatime 0 1 # /dev/nvme0n1p1 LABEL=ESP UUID=18CA-3DF1 /efi vfat rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=ascii,shortname=mixed,utf8,errors=remount-ro 0 2 # /dev/nvme0n1p7 LABEL=BOOT UUID=DA04-34E3 /boot vfat rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=ascii,shortname=mixed,utf8,errors=remount-ro 0 2 R\u00e9seau \u00b6 Copier les fichiers de configuration r\u00e9seau : $ cp /etc/systemd/network/*.network /mnt/etc/systemd/network/ $ ln -sf /run/systemd/resolve/stub-resolv.conf /mnt/etc/resolv.conf Chroot \u00b6 Ouvrir un shell chroot dans le syst\u00e8me nouvellement install\u00e9 : $ arch-chroot /mnt Fuseau horaire \u00b6 D\u00e9finir le fuseau horaire : $ ln -sf /usr/share/zoneinfo/Europe/Paris /etc/localtime Langue \u00b6 \u00c9diter le fichier /etc/locale.gen et d\u00e9commenter les locales en_US.UTF-8 et fr_FR.UTF-8 . G\u00e9n\u00e9rer ensuite les locales : $ locale-gen Cr\u00e9er le fichier /etc/locale.conf avec pour contenu LANG = en_US.UTF-8 Cr\u00e9er le fichier /etc/vconsole.conf avec pour contenu KEYMAP = fr-pc Nom d'h\u00f4te \u00b6 Entrer le nom de la machine (ne devant comporter que des lettres, des chiffres ou le tiret - , et commencer par une lettre) dans le fichier /etc/hostname . Initramfs \u00b6 Dans le fichier /etc/mkinitcpio.conf , remplacer la ligne HOOKS =( base udev autodetect modconf block filesystems keyboard fsck ) par HOOKS =( base systemd autodetect modconf block keyboard sd-vconsole sd-encrypt lvm2 filesystems fsck ) Cr\u00e9er l'image initramfs : $ mkinitcpio -P Ignorer les alertes concernant les firmwares. Mot de passe root \u00b6 D\u00e9finir un mot de passe pour le compte root : $ passwd Microcode \u00b6 En fonction du processeur, installer l'un des paquets amd-ucode ou intel-ucode . Il est possible de v\u00e9rifier la nature du processeur avec la commande $ cat /proc/cpuinfo | grep vendor | uniq Gestionnaire de d\u00e9marrage \u00b6 Installer le gestionnaire de d\u00e9marrage : $ bootctl --esp-path = /efi --boot-path = /boot install Installer \u00e9galement un crochet Pacman pour le mettre \u00e0 jour automatiquement : cr\u00e9er le r\u00e9pertoire /etc/pacman.d/hooks puis le fichier /etc/pacman.d/hooks/100-systemd-boot.hook avec pour contenu [Trigger] Type = Package Operation = Upgrade Target = systemd [Action] Description = Updating systemd-boot When = PostTransaction Exec = /usr/bin/bootctl --esp-path=/efi --boot-path=/boot update \u00c9diter le fichier /efi/loader/loader.conf avec pour contenu default arch.conf timeout 4 console-mode max editor no Obtenir l'UUID de la partition LUKS : $ blkid -l -t LABEL = ARCH Cr\u00e9er le fichier /boot/loader/entries/arch.conf avec pour contenu title Arch Linux linux /vmlinuz-linux initrd /<CPU>-ucode.img initrd /initramfs-linux.img options root=\"LABEL=ARCH_ROOT\" rw rd.luks.name=<UUID>=arch rd.luks.options=discard en rempla\u00e7ant <UUID> par l'UUID de la partition LUKS. <CPU> par la nature du processeur ( amd ou intel ). L'option rd.luks.options=discard doit \u00eatre retir\u00e9e si le syst\u00e8me est install\u00e9 sur un disque dur rotatif. Il est possible de v\u00e9rifier la nature du disque avec la commande $ lsblk -do PATH,ROTA","title":"Configuration"},{"location":"installation/configuration/#configuration","text":"","title":"Configuration"},{"location":"installation/configuration/#fstab","text":"G\u00e9n\u00e9rer le fichier fstab : $ genfstab -U /mnt >> /mnt/etc/fstab V\u00e9rifier le fichier g\u00e9n\u00e9r\u00e9 /mnt/etc/fstab et le corriger si n\u00e9cessaire. Il devrait typiquement se pr\u00e9senter comme suit : # Static information about the filesystems. # See fstab(5) for details. # <file system> <dir> <type> <options> <dump> <pass> # /dev/mapper/arch-root LABEL=ARCH_ROOT UUID=0c71a3c6-d4d1-48a5-9f41-93a31ff5c042 / ext4 rw,relatime 0 1 # /dev/nvme0n1p1 LABEL=ESP UUID=18CA-3DF1 /efi vfat rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=ascii,shortname=mixed,utf8,errors=remount-ro 0 2 # /dev/nvme0n1p7 LABEL=BOOT UUID=DA04-34E3 /boot vfat rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=ascii,shortname=mixed,utf8,errors=remount-ro 0 2","title":"Fstab"},{"location":"installation/configuration/#reseau","text":"Copier les fichiers de configuration r\u00e9seau : $ cp /etc/systemd/network/*.network /mnt/etc/systemd/network/ $ ln -sf /run/systemd/resolve/stub-resolv.conf /mnt/etc/resolv.conf","title":"R\u00e9seau"},{"location":"installation/configuration/#chroot","text":"Ouvrir un shell chroot dans le syst\u00e8me nouvellement install\u00e9 : $ arch-chroot /mnt","title":"Chroot"},{"location":"installation/configuration/#fuseau-horaire","text":"D\u00e9finir le fuseau horaire : $ ln -sf /usr/share/zoneinfo/Europe/Paris /etc/localtime","title":"Fuseau horaire"},{"location":"installation/configuration/#langue","text":"\u00c9diter le fichier /etc/locale.gen et d\u00e9commenter les locales en_US.UTF-8 et fr_FR.UTF-8 . G\u00e9n\u00e9rer ensuite les locales : $ locale-gen Cr\u00e9er le fichier /etc/locale.conf avec pour contenu LANG = en_US.UTF-8 Cr\u00e9er le fichier /etc/vconsole.conf avec pour contenu KEYMAP = fr-pc","title":"Langue"},{"location":"installation/configuration/#nom-dhote","text":"Entrer le nom de la machine (ne devant comporter que des lettres, des chiffres ou le tiret - , et commencer par une lettre) dans le fichier /etc/hostname .","title":"Nom d'h\u00f4te"},{"location":"installation/configuration/#initramfs","text":"Dans le fichier /etc/mkinitcpio.conf , remplacer la ligne HOOKS =( base udev autodetect modconf block filesystems keyboard fsck ) par HOOKS =( base systemd autodetect modconf block keyboard sd-vconsole sd-encrypt lvm2 filesystems fsck ) Cr\u00e9er l'image initramfs : $ mkinitcpio -P Ignorer les alertes concernant les firmwares.","title":"Initramfs"},{"location":"installation/configuration/#mot-de-passe-root","text":"D\u00e9finir un mot de passe pour le compte root : $ passwd","title":"Mot de passe root"},{"location":"installation/configuration/#microcode","text":"En fonction du processeur, installer l'un des paquets amd-ucode ou intel-ucode . Il est possible de v\u00e9rifier la nature du processeur avec la commande $ cat /proc/cpuinfo | grep vendor | uniq","title":"Microcode"},{"location":"installation/configuration/#gestionnaire-de-demarrage","text":"Installer le gestionnaire de d\u00e9marrage : $ bootctl --esp-path = /efi --boot-path = /boot install Installer \u00e9galement un crochet Pacman pour le mettre \u00e0 jour automatiquement : cr\u00e9er le r\u00e9pertoire /etc/pacman.d/hooks puis le fichier /etc/pacman.d/hooks/100-systemd-boot.hook avec pour contenu [Trigger] Type = Package Operation = Upgrade Target = systemd [Action] Description = Updating systemd-boot When = PostTransaction Exec = /usr/bin/bootctl --esp-path=/efi --boot-path=/boot update \u00c9diter le fichier /efi/loader/loader.conf avec pour contenu default arch.conf timeout 4 console-mode max editor no Obtenir l'UUID de la partition LUKS : $ blkid -l -t LABEL = ARCH Cr\u00e9er le fichier /boot/loader/entries/arch.conf avec pour contenu title Arch Linux linux /vmlinuz-linux initrd /<CPU>-ucode.img initrd /initramfs-linux.img options root=\"LABEL=ARCH_ROOT\" rw rd.luks.name=<UUID>=arch rd.luks.options=discard en rempla\u00e7ant <UUID> par l'UUID de la partition LUKS. <CPU> par la nature du processeur ( amd ou intel ). L'option rd.luks.options=discard doit \u00eatre retir\u00e9e si le syst\u00e8me est install\u00e9 sur un disque dur rotatif. Il est possible de v\u00e9rifier la nature du disque avec la commande $ lsblk -do PATH,ROTA","title":"Gestionnaire de d\u00e9marrage"},{"location":"installation/installation/","text":"Installation \u00b6 Installer les paquets essentiels : $ pacstrap /mnt base linux linux-firmware lvm2 vim Le paquet linux-firmware peut \u00eatre omis dans une machine virtuelle. Si l'ordinateur ne dispose pas d'une liaison Ethernet, installer \u00e9galement iwd .","title":"Installation"},{"location":"installation/installation/#installation","text":"Installer les paquets essentiels : $ pacstrap /mnt base linux linux-firmware lvm2 vim Le paquet linux-firmware peut \u00eatre omis dans une machine virtuelle. Si l'ordinateur ne dispose pas d'une liaison Ethernet, installer \u00e9galement iwd .","title":"Installation"},{"location":"installation/preinstallation/","text":"Pr\u00e9-installation \u00b6 P\u00e9riph\u00e9rique de d\u00e9marrage \u00b6 T\u00e9l\u00e9charger la derni\u00e8re image ISO d'Arch Linux et la graver sur une cl\u00e9 USB : $ dd if = archlinux-x86_64.iso of = /dev/ $DEVICE $ sync Ins\u00e9rer la cl\u00e9 USB dans l'ordinateur et d\u00e9marrer dessus. Cela se fait typiquement via le menu de d\u00e9marrage (g\u00e9n\u00e9ralement accessible depuis l'\u00e9cran de d\u00e9marrage en appuyant sur la touche F10 , F12 ou Esc ) ou depuis l'\u00e9cran de configuration du BIOS (g\u00e9n\u00e9ralement accessible en appuyant sur la touche F2 ). R\u00e9glage du clavier \u00b6 Passer le clavier en AZERTY : $ loadkeys fr-pc (Taper loqdkeys fr)pc .) V\u00e9rification du mode de d\u00e9marrage \u00b6 V\u00e9rifier que le PC est bien d\u00e9marr\u00e9 en mode UEFI : $ ls /sys/firmware/efi/efivars Connexion internet \u00b6 Ethernet \u00b6 Si l'ordinateur dispose d'une liaison Ethernet, v\u00e9rifier avec ip a que l'interface r\u00e9seau est correctement reconnue et configur\u00e9e. Wifi \u00b6 Si l'ordinateur ne dispose pas d'une liaison Ethernet, se connecter au r\u00e9seau wifi avec iwctl . Afficher les interfaces r\u00e9seau disponibles : $ iwctl device list Afficher les r\u00e9seaux wifi disponibles : $ iwctl station $DEVICE get-networks Se connecter \u00e0 un r\u00e9seau wifi : $ iwctl station $DEVICE connect $SSID V\u00e9rification \u00b6 V\u00e9rifier que la connexion internet fonctionne : $ ping archlinux.org Serveur SSH \u00b6 Si l'on dispose d'un autre ordinateur, il peut \u00eatre plus confortable d'effectuer l'essentiel de l'installation en SSH. Il faut pour cela d\u00e9finir un mot de passe pour le compte root et d\u00e9marrer le service sshd : $ passwd root $ systemctl start sshd.service La commande ip a permet de d\u00e9terminer l'IP de la machine sur le r\u00e9seau local, afin de s'y connecter. Horloge \u00b6 R\u00e9gler l'heure : $ timedatectl set-ntp true Partitionnement et formatage \u00b6 Identifier le p\u00e9riph\u00e9rique d'installation avec $ lsblk -do PATH S'assurer qu'il dispose d'une table des partitions au format GPT. $ gdisk -l $DEVICE Partition table scan: [...] GPT: present Dans le cas contraire, effacer la table des partitions (attention, toutes les donn\u00e9es seront perdues !) et la recr\u00e9er : $ gdisk $DEVICE Command (? for help): o Command (? for help): w EFI \u00b6 S'assurer que la p\u00e9riph\u00e9rique dispose d'une partition EFI. La cr\u00e9er si elle n'existe pas: $ gdisk $DEVICE Command (? for help): n Partition Number: <default> First sector: <default> Last sector: +256M Hex Code: ef00 Command (? for help): w La formater en FAT 32 : $ mkfs.fat -F32 -n ESP /dev/ $EFI_PARTITION D\u00e9marrage \u00b6 Cr\u00e9er la partition de d\u00e9marrage : $ gdisk $DEVICE Command (? for help): n Partition Number: <default> First sector: <default> Last sector: +512M Hex Code: ea00 Command (? for help): w La formater en FAT 32 : $ mkfs.fat -F32 -n BOOT /dev/ $BOOT_PARTITION Syst\u00e8me \u00b6 Cr\u00e9er la partition syst\u00e8me : $ gdisk $DEVICE Command (? for help): n Partition Number: <default> First sector: <default> Last sector: <default> Hex Code: <default> Command (? for help): w La chiffrer avec dm-crypt : $ cryptsetup -y luksFormat --label ARCH $ARCH_DEVICE $ cryptsetup open $ARCH_DEVICE arch Cr\u00e9er le volume et le groupe LVM : $ pvcreate /dev/mapper/arch $ vgcreate arch /dev/mapper/arch Afficher l'espace disque disponible sur le groupe LVM avec vgdisplay , puis cr\u00e9er le sous-volume. Laisser un peu d'espace disponible pour pouvoir ult\u00e9rieurement cr\u00e9er des snapshots. $ lvcreate -L 200G -n root arch Formater le sous-volume au format ext4 : $ mkfs.ext4 -L ARCH_ROOT /dev/mapper/arch-root Montage des syst\u00e8mes de fichier \u00b6 Monter la hi\u00e9rarchie nouvellement cr\u00e9\u00e9e sur /mnt : $ mount /dev/mapper/arch-root /mnt $ mkdir /mnt/boot /mnt/efi $ mount $BOOT_DEVICE /mnt/boot $ mount $EFI_DEVICE /mnt/efi","title":"Pr\u00e9-installation"},{"location":"installation/preinstallation/#pre-installation","text":"","title":"Pr\u00e9-installation"},{"location":"installation/preinstallation/#peripherique-de-demarrage","text":"T\u00e9l\u00e9charger la derni\u00e8re image ISO d'Arch Linux et la graver sur une cl\u00e9 USB : $ dd if = archlinux-x86_64.iso of = /dev/ $DEVICE $ sync Ins\u00e9rer la cl\u00e9 USB dans l'ordinateur et d\u00e9marrer dessus. Cela se fait typiquement via le menu de d\u00e9marrage (g\u00e9n\u00e9ralement accessible depuis l'\u00e9cran de d\u00e9marrage en appuyant sur la touche F10 , F12 ou Esc ) ou depuis l'\u00e9cran de configuration du BIOS (g\u00e9n\u00e9ralement accessible en appuyant sur la touche F2 ).","title":"P\u00e9riph\u00e9rique de d\u00e9marrage"},{"location":"installation/preinstallation/#reglage-du-clavier","text":"Passer le clavier en AZERTY : $ loadkeys fr-pc (Taper loqdkeys fr)pc .)","title":"R\u00e9glage du clavier"},{"location":"installation/preinstallation/#verification-du-mode-de-demarrage","text":"V\u00e9rifier que le PC est bien d\u00e9marr\u00e9 en mode UEFI : $ ls /sys/firmware/efi/efivars","title":"V\u00e9rification du mode de d\u00e9marrage"},{"location":"installation/preinstallation/#connexion-internet","text":"","title":"Connexion internet"},{"location":"installation/preinstallation/#ethernet","text":"Si l'ordinateur dispose d'une liaison Ethernet, v\u00e9rifier avec ip a que l'interface r\u00e9seau est correctement reconnue et configur\u00e9e.","title":"Ethernet"},{"location":"installation/preinstallation/#wifi","text":"Si l'ordinateur ne dispose pas d'une liaison Ethernet, se connecter au r\u00e9seau wifi avec iwctl . Afficher les interfaces r\u00e9seau disponibles : $ iwctl device list Afficher les r\u00e9seaux wifi disponibles : $ iwctl station $DEVICE get-networks Se connecter \u00e0 un r\u00e9seau wifi : $ iwctl station $DEVICE connect $SSID","title":"Wifi"},{"location":"installation/preinstallation/#verification","text":"V\u00e9rifier que la connexion internet fonctionne : $ ping archlinux.org","title":"V\u00e9rification"},{"location":"installation/preinstallation/#serveur-ssh","text":"Si l'on dispose d'un autre ordinateur, il peut \u00eatre plus confortable d'effectuer l'essentiel de l'installation en SSH. Il faut pour cela d\u00e9finir un mot de passe pour le compte root et d\u00e9marrer le service sshd : $ passwd root $ systemctl start sshd.service La commande ip a permet de d\u00e9terminer l'IP de la machine sur le r\u00e9seau local, afin de s'y connecter.","title":"Serveur SSH"},{"location":"installation/preinstallation/#horloge","text":"R\u00e9gler l'heure : $ timedatectl set-ntp true","title":"Horloge"},{"location":"installation/preinstallation/#partitionnement-et-formatage","text":"Identifier le p\u00e9riph\u00e9rique d'installation avec $ lsblk -do PATH S'assurer qu'il dispose d'une table des partitions au format GPT. $ gdisk -l $DEVICE Partition table scan: [...] GPT: present Dans le cas contraire, effacer la table des partitions (attention, toutes les donn\u00e9es seront perdues !) et la recr\u00e9er : $ gdisk $DEVICE Command (? for help): o Command (? for help): w","title":"Partitionnement et formatage"},{"location":"installation/preinstallation/#efi","text":"S'assurer que la p\u00e9riph\u00e9rique dispose d'une partition EFI. La cr\u00e9er si elle n'existe pas: $ gdisk $DEVICE Command (? for help): n Partition Number: <default> First sector: <default> Last sector: +256M Hex Code: ef00 Command (? for help): w La formater en FAT 32 : $ mkfs.fat -F32 -n ESP /dev/ $EFI_PARTITION","title":"EFI"},{"location":"installation/preinstallation/#demarrage","text":"Cr\u00e9er la partition de d\u00e9marrage : $ gdisk $DEVICE Command (? for help): n Partition Number: <default> First sector: <default> Last sector: +512M Hex Code: ea00 Command (? for help): w La formater en FAT 32 : $ mkfs.fat -F32 -n BOOT /dev/ $BOOT_PARTITION","title":"D\u00e9marrage"},{"location":"installation/preinstallation/#systeme","text":"Cr\u00e9er la partition syst\u00e8me : $ gdisk $DEVICE Command (? for help): n Partition Number: <default> First sector: <default> Last sector: <default> Hex Code: <default> Command (? for help): w La chiffrer avec dm-crypt : $ cryptsetup -y luksFormat --label ARCH $ARCH_DEVICE $ cryptsetup open $ARCH_DEVICE arch Cr\u00e9er le volume et le groupe LVM : $ pvcreate /dev/mapper/arch $ vgcreate arch /dev/mapper/arch Afficher l'espace disque disponible sur le groupe LVM avec vgdisplay , puis cr\u00e9er le sous-volume. Laisser un peu d'espace disponible pour pouvoir ult\u00e9rieurement cr\u00e9er des snapshots. $ lvcreate -L 200G -n root arch Formater le sous-volume au format ext4 : $ mkfs.ext4 -L ARCH_ROOT /dev/mapper/arch-root","title":"Syst\u00e8me"},{"location":"installation/preinstallation/#montage-des-systemes-de-fichier","text":"Monter la hi\u00e9rarchie nouvellement cr\u00e9\u00e9e sur /mnt : $ mount /dev/mapper/arch-root /mnt $ mkdir /mnt/boot /mnt/efi $ mount $BOOT_DEVICE /mnt/boot $ mount $EFI_DEVICE /mnt/efi","title":"Montage des syst\u00e8mes de fichier"},{"location":"installation/reboot/","text":"Red\u00e9marrage \u00b6 Quitter l'environnemnt chroot avec exit ou Ctrl+d . D\u00e9monter toutes les partitions avec umount -R /mnt . \u00c9teindre la machine avec poweroff puis enlever le p\u00e9riph\u00e9rique de d\u00e9marrage.","title":"Red\u00e9marrage"},{"location":"installation/reboot/#redemarrage","text":"Quitter l'environnemnt chroot avec exit ou Ctrl+d . D\u00e9monter toutes les partitions avec umount -R /mnt . \u00c9teindre la machine avec poweroff puis enlever le p\u00e9riph\u00e9rique de d\u00e9marrage.","title":"Red\u00e9marrage"},{"location":"postinstallation/adminsys/","text":"Administration syst\u00e8me \u00b6 Sudo \u00b6 Installer sudo : $ pacman -S sudo Cr\u00e9er le fichier /etc/sudoers.d/wheel avec pour contenu : %wheel ALL=(ALL) ALL Shell \u00b6 Installer Zsh : $ pacman -S zsh grml-zsh-config $ chsh -s /usr/bin/zsh $ exec zsh Administrateur syst\u00e8me \u00b6 Cr\u00e9er le ou les comptes administrateurs : $ groupadd -g 1000 vivien $ useradd -u 1000 -g 1000 -G network,users,sys,wheel -m -s /usr/bin/zsh -c 'Vivien Maisonneuve' vivien $ passwd vivien OpenSSH \u00b6 Installer et d\u00e9marrer OpenSSH : $ pacman -S openssh $ systemctl enable --now sshd.service Configurer les cl\u00e9s SSH autoris\u00e9es (par exemple avec ssh-copy-id , ou en cr\u00e9ant le fichier ~/.ssh/authorized_keys ). \u00c9diter ensuite le fichier /etc/ssh/sshd_config de mani\u00e8re \u00e0 d\u00e9sactiver l'authentification par mot de passe : PasswordAuthentication no Red\u00e9marrer ensuite le service OpenSSH : $ systemctl restart sshd.service NTP \u00b6 D\u00e9marrer le service NTP : $ systemctl enable --now systemd-timesyncd.service Gestionnaire de paquets \u00b6 Pacman \u00b6 \u00c9diter le fichier /etc/pacman.conf et d\u00e9commenter la ligne Color \u00c9diter le fichier /etc/pacman.d/mirrorlist de mani\u00e8re \u00e0 avoir les entr\u00e9es suivantes : Server = https://mir.archlinux.fr/$repo/os/$arch Server = https://mirrors.kernel.org/archlinux/$repo/os/$arch Server = https://mirror.pkgbuild.com/$repo/os/$arch Installer le paquet pacman-contrib et activer paccache.timer : $ pacman -S pacman-contrib $ systemctl enable paccache.timer Installer le paquet pkgfile et activer son timer : $ pacman -S pkgfile $ systemctl enable pkgfile-update.timer Yay \u00b6 Installer Yay : $ pacman -S --needed git base-devel $ su vivien $ cd $ git clone https://aur.archlinux.org/yay-bin.git $ cd yay-bin $ makepkg -si $ cd .. $ rm -fr yay-bin $ exit","title":"Administration syst\u00e8me"},{"location":"postinstallation/adminsys/#administration-systeme","text":"","title":"Administration syst\u00e8me"},{"location":"postinstallation/adminsys/#sudo","text":"Installer sudo : $ pacman -S sudo Cr\u00e9er le fichier /etc/sudoers.d/wheel avec pour contenu : %wheel ALL=(ALL) ALL","title":"Sudo"},{"location":"postinstallation/adminsys/#shell","text":"Installer Zsh : $ pacman -S zsh grml-zsh-config $ chsh -s /usr/bin/zsh $ exec zsh","title":"Shell"},{"location":"postinstallation/adminsys/#administrateur-systeme","text":"Cr\u00e9er le ou les comptes administrateurs : $ groupadd -g 1000 vivien $ useradd -u 1000 -g 1000 -G network,users,sys,wheel -m -s /usr/bin/zsh -c 'Vivien Maisonneuve' vivien $ passwd vivien","title":"Administrateur syst\u00e8me"},{"location":"postinstallation/adminsys/#openssh","text":"Installer et d\u00e9marrer OpenSSH : $ pacman -S openssh $ systemctl enable --now sshd.service Configurer les cl\u00e9s SSH autoris\u00e9es (par exemple avec ssh-copy-id , ou en cr\u00e9ant le fichier ~/.ssh/authorized_keys ). \u00c9diter ensuite le fichier /etc/ssh/sshd_config de mani\u00e8re \u00e0 d\u00e9sactiver l'authentification par mot de passe : PasswordAuthentication no Red\u00e9marrer ensuite le service OpenSSH : $ systemctl restart sshd.service","title":"OpenSSH"},{"location":"postinstallation/adminsys/#ntp","text":"D\u00e9marrer le service NTP : $ systemctl enable --now systemd-timesyncd.service","title":"NTP"},{"location":"postinstallation/adminsys/#gestionnaire-de-paquets","text":"","title":"Gestionnaire de paquets"},{"location":"postinstallation/adminsys/#pacman","text":"\u00c9diter le fichier /etc/pacman.conf et d\u00e9commenter la ligne Color \u00c9diter le fichier /etc/pacman.d/mirrorlist de mani\u00e8re \u00e0 avoir les entr\u00e9es suivantes : Server = https://mir.archlinux.fr/$repo/os/$arch Server = https://mirrors.kernel.org/archlinux/$repo/os/$arch Server = https://mirror.pkgbuild.com/$repo/os/$arch Installer le paquet pacman-contrib et activer paccache.timer : $ pacman -S pacman-contrib $ systemctl enable paccache.timer Installer le paquet pkgfile et activer son timer : $ pacman -S pkgfile $ systemctl enable pkgfile-update.timer","title":"Pacman"},{"location":"postinstallation/adminsys/#yay","text":"Installer Yay : $ pacman -S --needed git base-devel $ su vivien $ cd $ git clone https://aur.archlinux.org/yay-bin.git $ cd yay-bin $ makepkg -si $ cd .. $ rm -fr yay-bin $ exit","title":"Yay"},{"location":"postinstallation/boot/","text":"D\u00e9marrage \u00b6 D\u00e9marrer l'ordinateur et se connecter avec le compte root . Connexion internet \u00b6 D\u00e9marrer les services r\u00e9seau : $ systemctl enable --now systemd-networkd.service systemd-resolved.service Si l'ordinateur ne dispose pas d'une liaison Ethernet, d\u00e9marrer \u00e9galement le service iwd : $ systemctl enable --now iwd.service Suivre ensuite les instructions indiqu\u00e9es pr\u00e9c\u00e9demment pour \u00e9tablir une connexion r\u00e9seau.","title":"D\u00e9marrage"},{"location":"postinstallation/boot/#demarrage","text":"D\u00e9marrer l'ordinateur et se connecter avec le compte root .","title":"D\u00e9marrage"},{"location":"postinstallation/boot/#connexion-internet","text":"D\u00e9marrer les services r\u00e9seau : $ systemctl enable --now systemd-networkd.service systemd-resolved.service Si l'ordinateur ne dispose pas d'une liaison Ethernet, d\u00e9marrer \u00e9galement le service iwd : $ systemctl enable --now iwd.service Suivre ensuite les instructions indiqu\u00e9es pr\u00e9c\u00e9demment pour \u00e9tablir une connexion r\u00e9seau.","title":"Connexion internet"},{"location":"postinstallation/gui/","text":"Interface graphique \u00b6 Polices de caract\u00e8re \u00b6 Installer quelques jeux de polices de caract\u00e8re : $ pacman -S ttf-croscore ttf-dejavu noto-fonts noto-fonts-emoji ttf-roboto GNOME \u00b6 Installer GNOME : $ pacman -S gnome $ systemctl enable --now gdm.service Nemo \u00b6 Installer Nemo : $ pacman -S nemo nemo-fileroller Dans la session GNOME, le d\u00e9finir en tant qu'explorateur de fichiers par d\u00e9faut : $ xdg-mime default nemo.desktop inode/directory application/x-gnome-saved-search Si l'on souhaite afficher le bureau avec Nemo, ex\u00e9cuter les commandes suivantes : $ gsettings set org.nemo.desktop show-desktop-icons true $ grep -v 'OnlyShowIn=X-Cinnamon;' /usr/share/applications/nemo-autostart.desktop > ~/.config/autostart/nemo-autostart.desktop Sway \u00b6 Installer Wayland : $ pacman -S wayland wl-clipboard wireplumber Installer PulseAudio : $ pacman -S pulseaudio Installer Sway et un ensemble de programmes utiles sous Wayland : $ pacman -S sway swaylock swayidle alacritty kanshi wofi mako grim slurp gammastep waybar otf-font-awesome xdg-desktop-portal-wlr xorg-xwayland Pour passer le clavier en AZERTY, ajouter l'entr\u00e9e suivante dans ~/.config/sway/config : input \"type:keyboard\" { xkb_layout \"fr\" xkb_variant \"oss\" xkb_numlock \"enabled\" }","title":"Interface graphique"},{"location":"postinstallation/gui/#interface-graphique","text":"","title":"Interface graphique"},{"location":"postinstallation/gui/#polices-de-caractere","text":"Installer quelques jeux de polices de caract\u00e8re : $ pacman -S ttf-croscore ttf-dejavu noto-fonts noto-fonts-emoji ttf-roboto","title":"Polices de caract\u00e8re"},{"location":"postinstallation/gui/#gnome","text":"Installer GNOME : $ pacman -S gnome $ systemctl enable --now gdm.service","title":"GNOME"},{"location":"postinstallation/gui/#nemo","text":"Installer Nemo : $ pacman -S nemo nemo-fileroller Dans la session GNOME, le d\u00e9finir en tant qu'explorateur de fichiers par d\u00e9faut : $ xdg-mime default nemo.desktop inode/directory application/x-gnome-saved-search Si l'on souhaite afficher le bureau avec Nemo, ex\u00e9cuter les commandes suivantes : $ gsettings set org.nemo.desktop show-desktop-icons true $ grep -v 'OnlyShowIn=X-Cinnamon;' /usr/share/applications/nemo-autostart.desktop > ~/.config/autostart/nemo-autostart.desktop","title":"Nemo"},{"location":"postinstallation/gui/#sway","text":"Installer Wayland : $ pacman -S wayland wl-clipboard wireplumber Installer PulseAudio : $ pacman -S pulseaudio Installer Sway et un ensemble de programmes utiles sous Wayland : $ pacman -S sway swaylock swayidle alacritty kanshi wofi mako grim slurp gammastep waybar otf-font-awesome xdg-desktop-portal-wlr xorg-xwayland Pour passer le clavier en AZERTY, ajouter l'entr\u00e9e suivante dans ~/.config/sway/config : input \"type:keyboard\" { xkb_layout \"fr\" xkb_variant \"oss\" xkb_numlock \"enabled\" }","title":"Sway"},{"location":"postinstallation/optimization/","text":"Optimisation \u00b6 SSD \u00b6 V\u00e9rifier si certains p\u00e9riph\u00e9riques supportent le TRIM : $ lsblk --discard Le cas \u00e9ch\u00e9ant, activer un TRIM p\u00e9riodique des disques : $ systemctl enable fstrim.timer TLP \u00b6 Sur ordinateur portable, installer TLP pour optimiser la dur\u00e9e de vie de la batterie : $ pacman -S tlp $ systemctl enable --now tlp.service","title":"Optimisation"},{"location":"postinstallation/optimization/#optimisation","text":"","title":"Optimisation"},{"location":"postinstallation/optimization/#ssd","text":"V\u00e9rifier si certains p\u00e9riph\u00e9riques supportent le TRIM : $ lsblk --discard Le cas \u00e9ch\u00e9ant, activer un TRIM p\u00e9riodique des disques : $ systemctl enable fstrim.timer","title":"SSD"},{"location":"postinstallation/optimization/#tlp","text":"Sur ordinateur portable, installer TLP pour optimiser la dur\u00e9e de vie de la batterie : $ pacman -S tlp $ systemctl enable --now tlp.service","title":"TLP"},{"location":"postinstallation/services/","text":"Services syst\u00e8me \u00b6 Docker \u00b6 Installer et d\u00e9marrer Docker : $ pacman -S docker $ systemctl enable --now docker.service $ usermod -aG docker vivien CUPS \u00b6 Installer et d\u00e9marrer CUPS : $ pacman -S cups $ systemctl enable --now cups.service Tailscale \u00b6 Installer et d\u00e9marrer Tailscale : $ pacman -S tailscale $ systemctl enable --now tailscaled.service Authentifier la machine avec tailscale up .","title":"Services syst\u00e8me"},{"location":"postinstallation/services/#services-systeme","text":"","title":"Services syst\u00e8me"},{"location":"postinstallation/services/#docker","text":"Installer et d\u00e9marrer Docker : $ pacman -S docker $ systemctl enable --now docker.service $ usermod -aG docker vivien","title":"Docker"},{"location":"postinstallation/services/#cups","text":"Installer et d\u00e9marrer CUPS : $ pacman -S cups $ systemctl enable --now cups.service","title":"CUPS"},{"location":"postinstallation/services/#tailscale","text":"Installer et d\u00e9marrer Tailscale : $ pacman -S tailscale $ systemctl enable --now tailscaled.service Authentifier la machine avec tailscale up .","title":"Tailscale"}]}